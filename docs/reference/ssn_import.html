<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function reads spatial data from a .ssn folder
and creates an SSN object."><title>Import SSN object — ssn_import • SSN2</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Import SSN object — ssn_import"><meta property="og:description" content="This function reads spatial data from a .ssn folder
and creates an SSN object."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">SSN2</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/introduction.html">An Introduction to Spatial Stream Network Modeling in R Using SSN2</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/USEPA/SSN2/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Import <code>SSN</code> object</h1>
      <small class="dont-index">Source: <a href="https://github.com/USEPA/SSN2/blob/HEAD/R/ssn_import.R" class="external-link"><code>R/ssn_import.R</code></a></small>
      <div class="d-none name"><code>ssn_import.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function reads spatial data from a .ssn folder
and creates an <code>SSN</code> object.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ssn_import</span><span class="op">(</span></span>
<span>  <span class="va">path</span>,</span>
<span>  include_obs <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  <span class="va">predpts</span>,</span>
<span>  format_additive <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  names_additive <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>path</dt>
<dd><p>Filepath to the .ssn directory. See details.</p></dd>


<dt>include_obs</dt>
<dd><p>default = <code>TRUE</code>. Logical indicating
whether observed sites should be included in the SSN object.</p></dd>


<dt>predpts</dt>
<dd><p>Vector of shapefile basenames for prediction sites
found within the .ssn folder.</p></dd>


<dt>format_additive</dt>
<dd><p>Logical indicating whether the columns containing
the addtive function values should be formated for
<code>SSN2</code>. Default = <code>FALSE</code>.</p></dd>


<dt>names_additive</dt>
<dd><p>Character vector of column names in observed and
prediction site datasets containing additive function values.
Must be defined if <code>format_additive = TRUE</code>. Default =
<code>NULL</code>.</p></dd>


<dt>overwrite</dt>
<dd><p>default = <code>FALSE</code>. If <code>TRUE</code>, overwrite
existing binaryID.db files.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p><code>ssn_import</code> returns an object of class SSN, which is a list
with four elements containing:</p><ul><li><p><code>edges</code>: An <code>sf data.frame</code> containing the stream network,
with an additional 'netgeometry' column.</p></li>
<li><p><code>obs</code>: An sf data.frame containing observed site locations,
with an additional 'netgeometry' column. NA if <code>include_obs =
    FALSE</code>.</p></li>
<li><p><code>preds</code>: A list of sf data.frames containing prediction
site locations. The names of the preds list correspond to the
basenames of the prediction site shapefiles (without the .shp
extension) specified in <code>predpts</code>. Empty list if <code>predpts</code> is not provided.</p></li>
<li><p>path: The local file to the .ssn directory associated with the <code>SSN</code>
object.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The <code class="command">importSSN</code> function imports spatial data from a .ssn
folder to create an <code>SSN</code> object. The information contained in the
.ssn folder can be generated using a number of proprietary and
open source software tools:</p><ul><li><p>The Spatial Tools for the Analysis of River Systems
(STARS) tools for ArcGIS Desktop versions 9.3x-10.8x (Peterson
and Ver Hoef 2014). This custom ArcGIS toolset is designed to
work with existing streams data in vector format.</p></li>
<li><p>The openSTARS package (Kattwinkel et al. 2020) extends
the functionality of the STARS toolset, which makes use of R
and GRASS GIS. It is open source and designed to derive streams
in raster format from a digital elevation model (DEM).</p></li>
<li><p>The SSNbler package (currently in development as of
September 2023) is an open source version of the STARS toolset,
which makes use of the functionality found in the sf package to
process streams data in vector format.</p></li>
</ul><p>When spatial data are processed using one of these software
tools, a .ssn directory is output which contains all of the
spatial, topological and attribute data needed to fit a spatial
statistical stream network model to streams data.  This includes:</p><ul><li><p>An edges shapefile of lines that represent the stream
network.</p></li>
<li><p>A sites shapefile of points where observed data were
collected on the stream network.</p></li>
<li><p>Prediction sites shapefile(s) of locations where
predictions will be made.</p></li>
<li><p>netID.dat files for each distinct network, which store
the topological relationships of the line segments in edges.</p></li>
</ul><p>A more detailed description of the .ssn directory and its
contents is provided in Peterson and Ver Hoef (2014).</p>
<p>The <code class="command">ssn_import</code> imports the edges, observed sites, and
prediction sites as <code>sf data.frame</code> objects. A new column named 'netgeometry'
is created to store important data that represents
topological relationships in a spatial stream network
model. These data are stored in character format, which is less
likely to be inadvertantly changed by users. See
<code><a href="ssn_get_netgeometry.html">ssn_get_netgeometry</a></code> for a more detailed description of
the format and contents of 'netgeometry'.</p>
<p>The information contained in the netID text files is imported
into an SQLite database, binaryID.db, which is stored in the .ssn
directory. This information is used internally by
<code><a href="ssn_create_distmat.html">ssn_create_distmat</a></code>,
<code><a href="ssn_lm.html">ssn_lm</a></code> and
<code><a href="ssn_glm.html">ssn_glm</a></code> to calculate the data necessary
to fit a spatial statistical model to stream network data. If
<code>overwrite = TRUE</code> (<code>overwrite = FALSE</code> is the default) and a binaryID.db
file already exists within the .ssn directory, it will be
overwriten when the <code>SSN</code> object is created.</p>
<p>At a minimum, an <code>SSN</code> object must always contain streams, which
are referred to as edges. The <code>SSN</code> object would also typically
contain a set of observed sites, where measurements have been
collected and only one observed dataset is permitted. When
<code>include_obs=FALSE</code>, an <code>SSN</code> object is created without
observations. This option provides flexibility for users who
would like to simulate data on a set of artifical sites on an
existing stream network. Note that observation sites must be
included in the <code>SSN</code> object in order to fit models using
<code class="command">ssn_lm</code> or <code class="command">ssn_glm</code>. The <code>SSN</code> object may contain
multiple sets of prediction points (or none), which are stored as
separate shapefiles in the .ssn directory. The
<code><a href="ssn_import_predpts.html">ssn_import_predpts</a></code> function allows users to import additional
sets of prediction sites to a an existing <code>SSN</code> object.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Kattwinkel, M., Szocs, E., Peterson, E., and Schafer,
R.B. (2020) Preparing GIS data for analysis of stream monitoring
data: The R package openSTARS. <em>PLOS One</em> <b>15(9)</b>,
e0239237.
Peterson, E., and Ver Hoef, J.M. (2014) STARS: An
ArcGIS toolset used to calculate the spatial information needed
to fit spatial statistical stream network models to stream
network data. <em>Journal of Statistical Software</em>
<b>56(2)</b>, 1--17.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><a href="ssn_get_netgeometry.html">ssn_get_netgeometry</a></p></div>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Create local temporary copy of MiddleFork04.ssn found in</span></span></span>
<span class="r-in"><span><span class="co"># SSN2/lsndata folder. Only necessary for this example.</span></span></span>
<span class="r-in"><span><span class="fu"><a href="copy_lsn_to_temp.html">copy_lsn_to_temp</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Import SSN object with no prediction sites</span></span></span>
<span class="r-in"><span><span class="va">mf04</span> <span class="op">&lt;-</span> <span class="fu">ssn_import</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/MiddleFork04.ssn"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Import SSN object with 3 sets of prediction sites</span></span></span>
<span class="r-in"><span><span class="va">mf04p</span> <span class="op">&lt;-</span> <span class="fu">ssn_import</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/MiddleFork04.ssn"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  predpts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"pred1km.shp"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"CapeHorn.shp"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"Knapp.shp"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michael Dumelle, Jay M. Ver Hoef, Erin Peterson.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

