<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Split a prediction dataset in an SSN object — ssn_split_predpts • SSN2</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Split a prediction dataset in an SSN object — ssn_split_predpts"><meta property="og:description" content="The splitPrediction function is used to
split prediction sets in an SSN object into smaller
prediction sets. It returns a SSN object with additional
prediction sets based on equal interval splits, a factor,
integer, character or logical column stored within the prediction
set, or a logical expression."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">SSN2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/introduction.html">An Introduction to Spatial Stream Network Modeling in R Using SSN2</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/USEPA/SSN2/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Split a prediction dataset in an <code>SSN</code> object</h1>
    <small class="dont-index">Source: <a href="https://github.com/USEPA/SSN2/blob/HEAD/R/ssn_split_predpts.R" class="external-link"><code>R/ssn_split_predpts.R</code></a></small>
    <div class="hidden name"><code>ssn_split_predpts.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code class="command">splitPrediction</code> function is used to
split prediction sets in an <code>SSN</code> object into smaller
prediction sets. It returns a <code>SSN</code> object with additional
prediction sets based on equal interval splits, a factor,
integer, character or logical column stored within the prediction
set, or a logical expression.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ssn_split_predpts</span><span class="op">(</span></span>
<span>  <span class="va">ssn</span>,</span>
<span>  <span class="va">predpts</span>,</span>
<span>  <span class="va">size_predpts</span>,</span>
<span>  <span class="va">by</span>,</span>
<span>  <span class="va">subset</span>,</span>
<span>  <span class="va">id_predpts</span>,</span>
<span>  keep <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  drop_levels <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  overwrite <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>ssn</dt>
<dd><p>An <code>SSN</code> object.</p></dd>


<dt>predpts</dt>
<dd><p>A character string representing the name of the
prediction dataset.</p></dd>


<dt>size_predpts</dt>
<dd><p>numeric value representing the size of the new
prediction sets. The existing prediction set is split equally to
produce multiple prediction sets of this size</p></dd>


<dt>by</dt>
<dd><p>character string representing the column name of type
factor, integer, character or logical that the split will be
based on</p></dd>


<dt>subset</dt>
<dd><p>logical expression indicating which elements or rows
to keep; missing values are taken as <code>FALSE</code></p></dd>


<dt>id_predpts</dt>
<dd><p>character string representing the new prediction
dataset name. This value is only specified when the subset method is
used</p></dd>


<dt>keep</dt>
<dd><p>logical value indicating whether the original
prediction dataset should be retained in the <code>SSN</code>
object. Default is <code>TRUE</code></p></dd>


<dt>drop_levels</dt>
<dd><p>logical value indicating whether empty factor
levels should be dropped in the <code>by</code> column when the new
prediction dataset(s) are created. Default is <code>FALSE</code></p></dd>


<dt>overwrite</dt>
<dd><p>logical indicating whether the new prediction
dataset geopackage should be deleted in the .ssn directory if it
already exists. Default = <code>FALSE</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>returns the <code>SSN</code> specified in <code>ssn</code>, with one or more new prediction
sets. Geopackages of the new prediction sets are written to the
.ssn directory designated in ssn$path.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Three methods have been provided to split prediction sets:
size, by, and subset. The
size method is used to split the existing prediction
set into multiple equally-sized prediction sets using the <code>size_predpts</code> argument. Note that the
final prediction set may be smaller in size than the others if
the total number of predictions is not evenly divisible by
<code>size_predpts</code>. The by method is used if the prediction
set is to be split into multiple new prediction sets based on an
existing column of type factor, integer, character, or
logical specified using the argument <code>by</code>. The subset method is used to create one new
prediction set based on a logical expression defined in <code>subset</code>.</p>
<p>When more than one prediction dataset is created the prediction
dataset names will be appended with a hyphen and prediction
dataset number if more than one prediction dataset is
created. For example, when "preds" is split using
<code>size_predpts</code>, the new names will be "preds-1", "preds-2", and
so forth.</p>
<p>When <code>keep=FALSE</code>, the prediction dataset is removed from
the <code>SSN</code> object stored in memory, but is not deleted from
the .ssn directory specified in <code>ssn$path</code>.</p>
<p>Note that, only one
method may be specified when the <code class="command">ssn_split_predpts</code>
function is called. The distance matrices for the new prediction
datasets must be created using the <code>ssn_create_distmat</code> before
predictions can be made.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">## Import SSN object</span></span></span>
<span class="r-in"><span><span class="fu"><a href="copy_lsn_to_temp.html">copy_lsn_to_temp</a></span><span class="op">(</span><span class="op">)</span> <span class="co">## Only needed for this example</span></span></span>
<span class="r-in"><span><span class="va">ssn</span> <span class="op">&lt;-</span> <span class="fu"><a href="ssn_import.html">ssn_import</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/MiddleFork04.ssn"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  predpts <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"pred1km"</span>, <span class="st">"CapeHorn"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Split predictions based on 'size' method</span></span></span>
<span class="r-in"><span><span class="va">ssn1</span> <span class="op">&lt;-</span> <span class="fu">ssn_split_predpts</span><span class="op">(</span><span class="va">ssn</span>, <span class="st">"CapeHorn"</span>,</span></span>
<span class="r-in"><span>  size_predpts <span class="op">=</span> <span class="fl">200</span>,</span></span>
<span class="r-in"><span>  keep <span class="op">=</span> <span class="cn">FALSE</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ssn1</span><span class="op">$</span><span class="va">preds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "pred1km"    "CapeHorn-1" "CapeHorn-2" "CapeHorn-3" "CapeHorn-4"</span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">ssn1</span><span class="op">$</span><span class="va">preds</span><span class="op">[[</span><span class="st">"CapeHorn-1"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 200</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Split predictions using 'by' method</span></span></span>
<span class="r-in"><span><span class="va">ssn</span><span class="op">$</span><span class="va">preds</span><span class="op">$</span><span class="va">pred1km</span><span class="op">$</span><span class="va">net.fac</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">as.factor</a></span><span class="op">(</span><span class="va">ssn</span><span class="op">$</span><span class="va">preds</span><span class="op">$</span><span class="va">pred1km</span><span class="op">$</span><span class="va">netID</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ssn2</span> <span class="op">&lt;-</span> <span class="fu">ssn_split_predpts</span><span class="op">(</span><span class="va">ssn</span>, <span class="st">"pred1km"</span>,</span></span>
<span class="r-in"><span>  by <span class="op">=</span> <span class="st">"net.fac"</span>,</span></span>
<span class="r-in"><span>  overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ssn2</span><span class="op">$</span><span class="va">preds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "pred1km"           "CapeHorn"          "pred1km-net.fac-1"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "pred1km-net.fac-2"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Split predictions using 'subset' method</span></span></span>
<span class="r-in"><span><span class="va">ssn3</span> <span class="op">&lt;-</span> <span class="fu">ssn_split_predpts</span><span class="op">(</span><span class="va">ssn</span>, <span class="st">"pred1km"</span>,</span></span>
<span class="r-in"><span>  subset <span class="op">=</span> <span class="va">ratio</span> <span class="op">&gt;</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  id_predpts <span class="op">=</span> <span class="st">"RATIO_05"</span>, overwrite <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">ssn3</span><span class="op">$</span><span class="va">preds</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "pred1km"  "CapeHorn" "RATIO_05"</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Michael Dumelle, Jay M. Ver Hoef, Erin Peterson.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer></div>

  


  

  </body></html>

